<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Assessing MSME Market Dynamics and Resilience in Phnom Penh</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
  <style>
    .custom-label {
      font-family: 'Roboto', sans-serif;
      font-size: 14px;
      font-weight: bold;
      color: black;
      text-shadow: -1px -1px 0 white, 1px -1px 0 white, -1px 1px 0 white, 1px 1px 0 white;
      background: transparent;
      border: none;
      padding: 2px;
    }
    .custom-tooltip {
      font-family: 'Roboto', sans-serif;
      font-size: 12px;
      padding: 5px;
    }
  </style>
</head>

<body class="bg-[#336666] font-roboto text-gray-800 overflow-x-hidden scroll-smooth">
  <header class="fixed top-0 left-0 w-full bg-[#336666] z-[1000] flex items-center justify-between px-4 py-4 shadow-md">
    <div class="w-[100px] md:w-[120px]">
      <img src="https://cdri.org.kh/storage/images/CDRI%20Logo_1704186788.png" alt="CDRI Logo" class="w-full h-auto" />
    </div>
    <h2 class="text-white text-xs sm:text-sm md:text-lg font-bold text-right flex-1 leading-snug md:leading-tight">
      MSME Market Dynamics and Resilience in Phnom Penh
    </h2>
  </header>

  <section class="min-h-screen w-full relative px-4 pt-24 pb-20">
    <div class="bg-white rounded-lg shadow-md overflow-visible">
      <div id="leaflet-map" class="w-full h-[75vh] min-h-[300px] p-2 my-4 border border-gray-200 rounded-lg"></div>
      <div class="p-4 border-t border-gray-100">
        <div class="grid grid-cols-1 gap-4 sm:flex sm:items-center sm:justify-between sm:gap-6">
          <select id="dataset-selector" class="w-full px-4 py-2 bg-white border border-gray-300 rounded-lg font-medium text-sm md:text-base">
            <option value="open">Number of open establishments in the last 12 months</option>
            <option value="closed">Number of closed establishments in the last 12 months</option>
            <option value="dataset2">Number of establishments by year of opening</option>
          </select>
          <div class="flex items-center gap-2 w-full">
            <div class="flex gap-2">
              <button id="play-button" class="px-3 py-2 text-white rounded-lg font-medium flex items-center text-xs bg-[#336666] hover:bg-[#2b5555]">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
                </svg>
              </button>
              <button id="stop-button" class="px-3 py-2 bg-gray-200 text-gray-700 rounded-lg font-medium flex items-center text-xs hover:bg-gray-300" disabled>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                </svg>
              </button>
            </div>
            <div class="flex items-center gap-2 flex-1 min-w-0">
              <span id="time-period-label" class="text-xs font-medium text-gray-700 whitespace-nowrap">Time:</span>
              <input type="range" id="time-slider" min="0" max="11" value="0" class="flex-1 h-2 bg-gray-200 rounded-lg cursor-pointer" />
              <span id="time-label" class="text-xs font-medium text-gray-700 whitespace-nowrap">January 2025</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <div id="map-modal" class="hidden fixed z-[1000] inset-0 bg-black bg-opacity-50">
    <div class="bg-white m-[5%] mx-auto p-5 rounded-lg w-4/5 max-w-[90vw] shadow-lg relative max-h-[90vh] overflow-y-auto">
      <span class="close-button absolute right-4 top-3 text-2xl font-bold text-gray-400 cursor-pointer hover:text-gray-600">×</span>
      <div id="modal-content">
        <h3 id="modal-district" class="text-lg font-bold mb-2"></h3>
        <p id="modal-value" class="text-gray-600"></p>
        <p id="modal-status" class="text-gray-600"></p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
          <div class="bg-gray-50 p-4 rounded-lg">
            <h4 class="text-md font-semibold mb-2">Operating and closed establishments</h4>
            <div id="pie-chart-status" class="w-full h-64"></div>
          </div>
          <div class="bg-gray-50 p-4 rounded-lg">
            <h4 class="text-md font-semibold mb-2">Monthly trends of new and closed establishments</h4>
            <div id="line-chart-trends" class="w-full h-64"></div>
          </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
          <div class="bg-gray-50 p-4 rounded-lg">
            <h4 class="text-md font-semibold mb-2">Proportion of opened and closed establishments by type</h4>
            <div id="pie-chart-type" class="w-full h-64"></div>
          </div>
          <div class="bg-gray-50 p-4 rounded-lg">
            <h4 class="text-md font-semibold mb-2">Number of establishments by year of opening</h4>
            <div id="line-chart-years" class="w-full h-64"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize map
      const map = L.map('leaflet-map').setView([11.5239, 104.9008], 13);
      L.tileLayer('https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png', {
        attribution: '© OpenStreetMap contributors'
      }).addTo(map);

      // Sample districts data (replace with your actual GeoJSON)
      const districtsGeoJSON = {
        "type": "FeatureCollection",
        "features": [
          {"type":"Feature","properties":{"name":"Chak Angrae Kraom"},"geometry":{"type":"Polygon","coordinates":[[[104.93811,11.517273],[104.935913,11.526917],[104.932129,11.531311],[104.927124,11.530273],[104.924927,11.527893],[104.921509,11.525696],[104.920288,11.520691],[104.916321,11.518677],[104.912903,11.519104],[104.913696,11.514709],[104.913696,11.510315],[104.93811,11.517273]]]}},
          {"type":"Feature","properties":{"name":"Chak Angrae Leu"},"geometry":{"type":"Polygon","coordinates":[[[104.913696,11.510315],[104.913879,11.505127],[104.912476,11.502319],[104.913696,11.482483],[104.921509,11.484497],[104.93573,11.489685],[104.947083,11.493713],[104.943726,11.499512],[104.942871,11.503113],[104.93811,11.517273],[104.913696,11.510315]]]}},
          {"type":"Feature","properties":{"name":"Stueng Mean Chey 1"},"geometry":{"type":"Polygon","coordinates":[[[104.898071,11.548096],[104.895508,11.5495],[104.890076,11.55011],[104.886902,11.548706],[104.8851808,11.5485108],[104.8852855,11.5477355],[104.8841965,11.5471495],[104.8835688,11.5468105],[104.8829251,11.5343644],[104.8852855,11.5346587],[104.898071,11.548096]]]}},
          {"type":"Feature","properties":{"name":"Stueng Mean Chey 2"},"geometry":{"type":"Polygon","coordinates":[[[104.8852855,11.5346587],[104.8858945,11.5344728],[104.8883085,11.5225203],[104.889099,11.522522],[104.893921,11.521912],[104.897705,11.522888],[104.897522,11.526306],[104.898499,11.533325],[104.898499,11.540283],[104.900696,11.544678],[104.898071,11.548096],[104.8852855,11.5346587]]]}},
          {"type":"Feature","properties":{"name":"Stueng Mean Chey 3"},"geometry":{"type":"Polygon","coordinates":[[[104.8851808,11.5485108],[104.8812486,11.5480728],[104.877319,11.547485],[104.872314,11.547302],[104.864075,11.545715],[104.860718,11.545471],[104.861694,11.541504],[104.862915,11.524719],[104.868713,11.522095],[104.872314,11.522095],[104.876892,11.520508],[104.882507,11.522095],[104.8883085,11.5225203],[104.8858945,11.5344728],[104.8852855,11.5346587],[104.8829251,11.5343644],[104.8835688,11.5468105],[104.8852855,11.5477355],[104.8851808,11.5485108]]]}},
          {"type":"Feature","properties":{"name":"Boeng Tumpun 1"},"geometry":{"type":"Polygon","coordinates":[[[104.897762,11.528044],[104.9113984,11.5273291],[104.915527,11.528931],[104.913879,11.533508],[104.911316,11.536499],[104.909302,11.54071],[104.905518,11.543518],[104.900696,11.544678],[104.898499,11.540283],[104.898499,11.533325],[104.897762,11.528044]]]}},
          {"type":"Feature","properties":{"name":"Boeng Tumpun 2"},"geometry":{"type":"Polygon","coordinates":[[[104.897705,11.522888],[104.9055436,11.5207378],[104.9108865,11.5194973],[104.912903,11.519104],[104.916321,11.518677],[104.920288,11.520691],[104.921509,11.525696],[104.918091,11.5271],[104.915527,11.528931],[104.9113984,11.5273291],[104.897762,11.528044],[104.897522,11.526306],[104.897705,11.522888]]]}}
        ]
      };

      // State variables
      let currentDataset = 'open';
      let currentTimeIndex = 0;
      let geoJsonLayer;
      let animationInterval;
      let labelLayers = [];
      let pieChartStatus = null;
      let lineChartTrends = null;
      let barChartType = null;
      let lineChartYears = null;

      // Color scales for different datasets
      const colorScales = {
        open: {
          ranges: [0, 5, 10, 15, 20],
          colors: ['#FD8D3C', '#FC4E2A', '#E31A1C', '#BD0026', '#800026']
        },
        closed: {
          ranges: [0, 5, 10, 15, 20],
          colors: ['#FEE0D2', '#FCBBA1', '#FC9272', '#FB6A4A', '#EF3B2C']
        },
        dataset2: {
          ranges: [0, 50, 100, 150, 200],
          colors: ['#FFFFCC', '#7FCDBB', '#41B6C4', '#2C7FB8', '#253494']
        }
      };

      // Function to get color based on value and dataset
      const getColor = (value, dataset) => {
        const {ranges, colors} = colorScales[dataset];
        for (let i = 0; i < ranges.length - 1; i++) {
          if (value <= ranges[i + 1]) return colors[i];
        }
        return colors[ranges.length - 1];
      };

      // Function to get district data (will be replaced with your actual data)
      const getDistrictData = (districtName) => {
        // This is a placeholder - replace with your actual data lookup
        let value, status;
        
        if (currentDataset === 'open') {
          value = Math.floor(Math.random() * 20); // Random value for demo
          status = 'Open Establishments';
        } else if (currentDataset === 'closed') {
          value = Math.floor(Math.random() * 15); // Random value for demo
          status = 'Closed Establishments';
        } else {
          value = Math.floor(Math.random() * 200); // Random value for demo
          status = 'Established businesses';
        }
        
        return { value, status };
      };

      // Chart rendering functions
      const renderPieChartStatus = (districtName) => {
        const container = document.getElementById('pie-chart-status');
        
        if (pieChartStatus) {
          pieChartStatus.dispose();
        }
        container.innerHTML = '';
        
        pieChartStatus = echarts.init(container);
        
        // Sample data - replace with your actual data
        const option = {
          tooltip: {
            trigger: 'item',
            formatter: '{a} <br/>{b}: {c} ({d}%)'
          },
          legend: {
            orient: 'horizontal',
            bottom: 0,
            data: ['Operating', 'Closed']
          },
          series: [
            {
              name: 'Status',
              type: 'pie',
              radius: ['50%', '70%'],
              avoidLabelOverlap: false,
              itemStyle: {
                borderRadius: 10,
                borderColor: '#fff',
                borderWidth: 2
              },
              label: {
                show: false,
                position: 'center'
              },
              emphasis: {
                label: {
                  show: true,
                  fontSize: '18',
                  fontWeight: 'bold'
                }
              },
              labelLine: {
                show: false
              },
              data: [
                { value: Math.floor(Math.random() * 100) + 50, name: 'Operating' },
                { value: Math.floor(Math.random() * 50) + 10, name: 'Closed' }
              ]
            }
          ]
        };
        
        pieChartStatus.setOption(option);
      };

      const renderLineChartTrends = (districtName) => {
        const container = document.getElementById('line-chart-trends');
        
        if (lineChartTrends) {
          lineChartTrends.dispose();
        }
        container.innerHTML = '';
        
        lineChartTrends = echarts.init(container);
        
        // Sample data - replace with your actual data
        const option = {
          tooltip: {
            trigger: 'axis'
          },
          legend: {
            data: ['New', 'Closed'],
            bottom: 0
          },
          grid: {
            left: '3%',
            right: '4%',
            bottom: '15%',
            top: '10%',
            containLabel: true
          },
          xAxis: {
            type: 'category',
            boundaryGap: false,
            data: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
          },
          yAxis: {
            type: 'value'
          },
          series: [
            {
              name: 'New',
              type: 'line',
              data: Array(12).fill().map(() => Math.floor(Math.random() * 20) + 5),
              smooth: true
            },
            {
              name: 'Closed',
              type: 'line',
              data: Array(12).fill().map(() => Math.floor(Math.random() * 15) + 2),
              smooth: true
            }
          ]
        };
        
        lineChartTrends.setOption(option);
      };

      const renderBarChartType = (districtName) => {
        const container = document.getElementById('pie-chart-type');
        
        if (barChartType) {
          barChartType.dispose();
        }
        container.innerHTML = '';
        
        barChartType = echarts.init(container);
        
        // Sample data - replace with your actual data
        const option = {
          tooltip: {
            trigger: 'axis',
            axisPointer: {
              type: 'shadow'
            }
          },
          legend: {
            data: ['Opened', 'Closed'],
            bottom: 0
          },
          grid: {
            left: '3%',
            right: '4%',
            bottom: '15%',
            top: '10%',
            containLabel: true
          },
          xAxis: {
            type: 'value'
          },
          yAxis: {
            type: 'category',
            data: ['Retail', 'Food', 'Services', 'Manufacturing', 'Other']
          },
          series: [
            {
              name: 'Opened',
              type: 'bar',
              stack: 'total',
              label: {
                show: true
              },
              emphasis: {
                focus: 'series'
              },
              data: [12, 18, 9, 5, 7]
            },
            {
              name: 'Closed',
              type: 'bar',
              stack: 'total',
              label: {
                show: true
              },
              emphasis: {
                focus: 'series'
              },
              data: [4, 6, 3, 2, 3]
            }
          ]
        };
        
        barChartType.setOption(option);
      };

      const renderLineChartYears = (districtName) => {
        const container = document.getElementById('line-chart-years');
        
        if (lineChartYears) {
          lineChartYears.dispose();
        }
        container.innerHTML = '';
        
        lineChartYears = echarts.init(container);
        
        // Sample data - replace with your actual data
        const option = {
          tooltip: {
            trigger: 'axis'
          },
          xAxis: {
            type: 'category',
            boundaryGap: false,
            data: ['2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022', '2023', '2024']
          },
          yAxis: {
            type: 'value'
          },
          series: [
            {
              data: [15, 23, 34, 45, 52, 68, 74, 82, 91, 105],
              type: 'line',
              smooth: true
            }
          ]
        };
        
        lineChartYears.setOption(option);
      };

      // Main map update function
      const updateMap = () => {
        // Remove existing layers
        if (geoJsonLayer) {
          map.removeLayer(geoJsonLayer);
        }
        labelLayers.forEach(label => map.removeLayer(label));
        labelLayers = [];
        
        // Add new GeoJSON layer
        geoJsonLayer = L.geoJSON(districtsGeoJSON, {
          style: (feature) => {
            const {value} = getDistrictData(feature.properties.name);
            return {
              fillColor: getColor(value, currentDataset),
              weight: 2,
              opacity: 1,
              color: 'white',
              dashArray: '3',
              fillOpacity: 0.7
            };
          },
          onEachFeature: (feature, layer) => {
            const {value, status} = getDistrictData(feature.properties.name);
            
            // Add label to the district
            const centroid = layer.getBounds().getCenter();
            const labelMarker = L.marker(centroid, {
              icon: L.divIcon({
                className: 'custom-label',
                html: value.toLocaleString(),
                iconSize: [20, 40],
                iconAnchor: [10, 20]
              }),
              interactive: false
            });
            labelMarker.addTo(map);
            labelLayers.push(labelMarker);
            
            // Add interactivity
            layer.on({
              click: () => {
                // Highlight the clicked district
                geoJsonLayer.eachLayer(l => geoJsonLayer.resetStyle(l));
                layer.setStyle({
                  weight: 3,
                  color: '#666',
                  dashArray: '',
                  fillOpacity: 0.9
                }).bringToFront();
                
                // Show modal with district info
                document.getElementById('modal-district').textContent = `Sangkat ${feature.properties.name}`;
                document.getElementById('modal-value').textContent = `${value} ${currentDataset === 'open' ? 'openings' : currentDataset === 'closed' ? 'closures' : 'establishments'}`;
                document.getElementById('modal-status').textContent = status;
                document.getElementById('map-modal').classList.remove('hidden');
                
                // Render charts for the district
                setTimeout(() => {
                  renderPieChartStatus(feature.properties.name);
                  renderLineChartTrends(feature.properties.name);
                  renderBarChartType(feature.properties.name);
                  renderLineChartYears(feature.properties.name);
                }, 10);
              },
              mouseover: () => {
                layer.setStyle({
                  weight: 3,
                  color: '#666',
                  dashArray: '',
                  fillOpacity: 0.9
                }).bringToFront();
              },
              mouseout: () => {
                geoJsonLayer.resetStyle(layer);
              }
            }).bindTooltip(
              `<strong>${feature.properties.name}</strong><br/>
              <span style="display:inline-block;width:10px;height:10px;border-radius:50%;background:#3498db;margin-right:5px;"></span>
              ${currentDataset === 'open' ? `Openings: ${value}` : currentDataset === 'closed' ? `Closures: ${value}` : `Establishments: ${value}`}`,
              {
                direction: 'top',
                sticky: true,
                className: 'custom-tooltip'
              }
            );
          }
        }).addTo(map);
        
        // Update legend and title
        updateLegend();
        updateTitleLegend();
      };

      // Legend functions
      const updateTitleLegend = () => {
        document.querySelector('.title-legend')?.remove();
        const legend = L.control({position: 'topright'});
        
        legend.onAdd = () => {
          const div = L.DomUtil.create('div', 'title-legend bg-white p-3 rounded-lg shadow-md border border-gray-200');
          
          div.innerHTML = `
            <div class="flex flex-col">
              <h4 class="text-sm font-bold text-gray-800 mb-1">
                ${
                  currentDataset === 'open' ? 'Number of open establishments' :
                  currentDataset === 'closed' ? 'Number of closed establishments' :
                  'Number of establishments by year of opening'
                }
              </h4>
              <div class="flex items-center text-sm text-gray-600">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
                ${currentDataset === 'dataset2' ? '2024' : 'Last 12 months'}
              </div>
            </div>
          `;
          return div;
        };
        
        legend.addTo(map);
      };

      const updateLegend = () => {
        document.querySelector('.info.legend')?.remove();
        const legend = L.control({position: 'bottomright'});
        
        legend.onAdd = () => {
          const div = L.DomUtil.create('div', 'info legend bg-white p-2 rounded shadow');
          const {ranges, colors} = colorScales[currentDataset] || {ranges: [], colors: []};
          
          div.innerHTML = `<h4 class="text-sm font-bold mb-2">${
            currentDataset === 'open' ? 'Openings Count' :
            currentDataset === 'closed' ? 'Closures Count' :
            'Establishment Count'
          }</h4>`;
          
          for (let i = 0; i < ranges.length - 1; i++) {
            div.innerHTML += `
              <div class="flex items-center mb-1">
                <i style="background:${colors[i]};width:12px;height:12px;display:inline-block;margin-right:5px;"></i>
                ${ranges[i]}${ranges[i + 1] ? `–${ranges[i + 1]}` : '+'}
              </div>
            `;
          }
          
          return div;
        };
        
        legend.addTo(map);
      };

      // Time slider functions
      const updateTimeSlider = () => {
        const slider = document.getElementById('time-slider');
        const timeLabel = document.getElementById('time-label');
        const timePeriodLabel = document.getElementById('time-period-label');
        
        if (currentDataset === 'dataset2') {
          // For year-based dataset
          slider.min = 2015;
          slider.max = 2024;
          slider.value = 2024;
          timeLabel.textContent = '2024';
          timePeriodLabel.textContent = 'Year:';
        } else {
          // For month-based datasets
          slider.min = 0;
          slider.max = 11;
          slider.value = 0;
          timeLabel.textContent = 'January 2024';
          timePeriodLabel.textContent = 'Month:';
        }
        
        updateMap();
      };

      // Event listeners
      document.getElementById('dataset-selector').addEventListener('change', function() {
        currentDataset = this.value;
        updateTimeSlider();
      });

      document.querySelector('.close-button').addEventListener('click', function() {
        document.getElementById('map-modal').classList.add('hidden');
      });

      document.getElementById('play-button').addEventListener('click', function() {
        this.disabled = true;
        document.getElementById('stop-button').disabled = false;
        this.classList.replace('bg-[#336666]', 'bg-gray-400');
        
        animationInterval = setInterval(() => {
          const slider = document.getElementById('time-slider');
          let nextValue = parseInt(slider.value) + 1;
          
          if (currentDataset === 'dataset2') {
            if (nextValue > 2024) nextValue = 2015;
          } else {
            if (nextValue > 11) nextValue = 0;
          }
          
          slider.value = nextValue;
          updateTimePeriod();
        }, 1000);
      });

      document.getElementById('stop-button').addEventListener('click', function() {
        document.getElementById('play-button').disabled = false;
        this.disabled = true;
        document.getElementById('play-button').classList.replace('bg-gray-400', 'bg-[#336666]');
        clearInterval(animationInterval);
      });

      document.getElementById('time-slider').addEventListener('input', updateTimePeriod);

      function updateTimePeriod() {
        const slider = document.getElementById('time-slider');
        const timeLabel = document.getElementById('time-label');
        
        if (currentDataset === 'dataset2') {
          currentTimeIndex = parseInt(slider.value);
          timeLabel.textContent = slider.value;
        } else {
          currentTimeIndex = parseInt(slider.value);
          const months = ['January', 'February', 'March', 'April', 'May', 'June', 
                         'July', 'August', 'September', 'October', 'November', 'December'];
          timeLabel.textContent = `${months[currentTimeIndex]} 2024`;
        }
        
        updateMap();
      }

      // Handle window resize
      window.addEventListener('resize', function() {
        if (pieChartStatus) pieChartStatus.resize();
        if (lineChartTrends) lineChartTrends.resize();
        if (barChartType) barChartType.resize();
        if (lineChartYears) lineChartYears.resize();
        map.invalidateSize();
      });

      // Initialize the map
      updateTimeSlider();
      
      // Ensure map resizes properly
      new ResizeObserver(() => map.invalidateSize()).observe(document.getElementById('leaflet-map'));
    });
  </script>
</body>
</html>